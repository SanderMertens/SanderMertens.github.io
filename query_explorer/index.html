<html>
  <head>
    <title>Flecs Explorer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="TextareaDecorator.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
    <link rel="icon" href="#" />
  </head>
  <body>
    <div id="app">
      <div class="top-box">
        <query 
          ref="query" 
          :error="error"
          v-on:changed="query_on_changed">
        </query>
      </div>
      <div class="app-box">
        <div class="content-box">
          <div class="entity-box">
            <entity-explorer :data="entity_data"></entity-explorer>
          </div>
          <div class="result-box">
            <results :data="data"></results>
          </div>
        </div>
      </div>
      <div class="editor-box">
        <editor 
          ref="editor"
          :run_ok="run_ok"
          :run_error="run_error" 
          :run_msg="run_msg" 
          v-on:run-code="run_code"
          v-on:change-code="change_code">
        </editor>
      </div>
    </div>

    <script src="web_queries.js"></script>
    <script src="web_queries_imports.js"></script>
    <script src="vue.js"></script>
    <script src="Keybinder.js"></script>
    <script src="Parser.js"></script>
    <script src="SelectHelper.js"></script>
    <script src="TextareaDecorator.js"></script>

    <script src="query.js"></script>
    <script src="results.js"></script>
    <script src="entity.js"></script>
    <script src="editor.js"></script>
    <script src="app.js"></script>

    <script>
      var parser = new Parser(
        { whitespace: /\s+/,
          comment: /\/\/[^\r\n]*/,
          rel_prop: /\b(Transitive|Final|Inclusive|Tag)\b/,
          builtin: /\b(IsA|ChildOf|Component|Identifier|Name|Symbol)\b/,
          builtin_variable: /(\bThis\b)|[\\.\\*]/,
          keyword: /\bwith\b/,
          entity: /\b[^_(),\s][a-zA-Z_0-9]+\b/,
          variable: /\b[a-zA-Z_0-9]/,
          operator: /[(),{}]/,
          other: /\S/ } );

      var ldt_1 = new TextareaDecorator( document.getElementById('plecs-editor'), parser );
      var ldt_2 = new TextareaDecorator( document.getElementById('query-editor'), parser );
    </script>
  </body>
</html>
