<html>
  <head>
    <title>Flecs Explorer</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="deps/TextareaDecorator.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&display=swap" rel="stylesheet">
    <link rel="icon" href="img/flecs_logo.png" />
  </head>
  <body>
    <div id="app">
      <!-- Top bar -->
      <div class="top-box">
        <div class="query-box">
          <div class="play-button-box">
            <a href="https://github.com/SanderMertens/flecs" target="_blank">
              <img src="img/flecs_logo.png" alt="Flecs GitHub">
            </a>
          </div>
          <query
            ref="query" 
            :error="error"
            v-on:changed="query_on_changed">
          </query>
        </div>
        <div class="share-button-box">
          <img src="img/share_icon.png" v-on:click="show_url">
        </div>
      </div>

      <!-- Tree view -->
      <div class="tree-box">
        <entity-tree ref="tree" v-on:select="select"></entity-tree>
      </div>

      <!-- Application box -->
      <div class="app-box">

        <!-- Query results & Entity inspector -->
        <div class="content-box">
          <div class="result-box">
            <results :data="data" v-on:select-entity="evt_select"></results>
          </div>
          <div class="entity-box">
            <inspector :entity="entity_data" :selection="selection" v-on:select-entity="evt_select" ref="inspector">
            </inspector>
          </div>
        </div>

        <!-- Editor -->
        <div class="editor-box">
          <editor 
            ref="plecs"
            :run_ok="run_ok"
            :run_error="run_error" 
            v-on:run-code="run_code">
          </editor>
        </div>
      </div>

      <!-- Terminal -->
      <div class="terminal-box">
        <terminal ref="terminal"></terminal>
      </div>

      <!-- URL modal -->
      <url-modal ref="url" :url="url"></url-modal>
    </div>

    <script src="deps/vue.js"></script>
    <script src="deps/Keybinder.js"></script>
    <script src="deps/Parser.js"></script>
    <script src="deps/SelectHelper.js"></script>
    <script src="deps/TextareaDecorator.js"></script>

    <script>
      var syntax_highlighter = new Parser(
        { whitespace: /\s+/,
          property: /[a-zA-Z_0-9]+(?=:)/,
          number: /\b[0-9]+\b/,
          operator: /[(),{}=.:]/,          
          comment: /\/\/[^\r\n]*/,
          rel_prop: /\b(Transitive|Final|Inclusive|Tag)\b/,
          builtin: /\b(IsA|ChildOf|Component|Tag|Identifier|Name|Symbol|Module|Prefab)\b/,
          builtin_variable: /(\bThis\b)|[\\*]/,
          keyword: /\b(using|with)\b/,
          variable: /\b([A-Z_0-9]|_[a-zA-Z_0-9]+)\b/,
          entity: /\b[a-zA-Z_0-9]+\b/,
          string: /"[^"]*"/,
          other: /\S/
        } );
    </script>

    <script src="js/detail_toggle.js"></script>
    <script src="js/content_container.js"></script>
    <script src="js/entity_icon.js"></script>
    <script src="js/entity_reference.js"></script>
    <script src="js/entity_tree.js"></script>
    <script src="js/query.js"></script>
    <script src="js/results.js"></script>
    <script src="js/entity_inspector.js"></script>
    <script src="js/editor.js"></script>
    <script src="js/url_modal.js"></script>
    <script src="js/terminal.js"></script>
    <script src="js/app.js"></script>

    <script src="web_queries.js"></script>
    <script src="web_queries_imports.js"></script>
  </body>
</html>
